<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="456px" preserveAspectRatio="none" style="width:864px;height:456px;" version="1.1" viewBox="0 0 864 456" width="864px" zoomAndPan="magnify">
    <defs>
        <filter height="300%" id="fdrryxihurzcq" width="300%" x="-1" y="-1">
            <feGaussianBlur result="blurOut" stdDeviation="2.0" />
            <feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0" />
            <feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3" />
            <feBlend in="SourceGraphic" in2="blurOut3" mode="normal" />
        </filter>
    </defs>
    <g>
        <text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="256" x="305" y="22.9951">External data pipeline data flow</text>
        <rect fill="#ADD8E6" height="404.1563" style="stroke: #A80036; stroke-width: 1.0;" width="441.5" x="256.5" y="34.2969" />
        <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="160" x="397.25" y="46.3638">External data pipeline</text>
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="82" x2="82" y1="101.7266" y2="444.4531" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="184" x2="184" y1="101.7266" y2="444.4531" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="299.5" x2="299.5" y1="101.7266" y2="444.4531" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="470" x2="470" y1="101.7266" y2="444.4531" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="570" x2="570" y1="101.7266" y2="444.4531" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="659" x2="659" y1="101.7266" y2="444.4531" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="785" x2="785" y1="101.7266" y2="444.4531" />
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="59" y="82.1279">Kafka</text>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="142" x="8" y="98.4248">platform.upload.ccx</text>
        <ellipse cx="82" cy="53.1328" fill="#99FF99" filter="url(#fdrryxihurzcq)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;" />
        <line style="stroke: #A80036; stroke-width: 2.0;" x1="70" x2="94" y1="67.1328" y2="67.1328" />
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="18" x="172" y="98.4248">S3</text>
        <path d="M166,49.4297 C166,39.4297 184,39.4297 184,39.4297 C184,39.4297 202,39.4297 202,49.4297 L202,75.4297 C202,85.4297 184,85.4297 184,85.4297 C184,85.4297 166,85.4297 166,75.4297 L166,49.4297 " fill="#FEFECE" filter="url(#fdrryxihurzcq)" style="stroke: #000000; stroke-width: 1.5;" />
        <path d="M166,49.4297 C166,59.4297 184,59.4297 184,59.4297 C184,59.4297 202,59.4297 202,49.4297 " fill="none" style="stroke: #000000; stroke-width: 1.5;" />
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="260.5" y="98.4248">Consumer</text>
        <ellipse cx="300" cy="69.4297" fill="#FEFECE" filter="url(#fdrryxihurzcq)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;" />
        <polygon fill="#A80036" points="296,57.4297,302,52.4297,300,57.4297,302,62.4297,296,57.4297" style="stroke: #A80036; stroke-width: 1.0;" />
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="424" y="98.4248">Downloader</text>
        <ellipse cx="470" cy="69.4297" fill="#FEFECE" filter="url(#fdrryxihurzcq)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;" />
        <polygon fill="#A80036" points="466,57.4297,472,52.4297,470,57.4297,472,62.4297,466,57.4297" style="stroke: #A80036; stroke-width: 1.0;" />
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="526" y="98.4248">InsightsOcp</text>
        <ellipse cx="570" cy="69.4297" fill="#FEFECE" filter="url(#fdrryxihurzcq)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;" />
        <polygon fill="#A80036" points="566,57.4297,572,52.4297,570,57.4297,572,62.4297,566,57.4297" style="stroke: #A80036; stroke-width: 1.0;" />
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="624" y="98.4248">Producer</text>
        <ellipse cx="659" cy="69.4297" fill="#FEFECE" filter="url(#fdrryxihurzcq)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;" />
        <polygon fill="#A80036" points="655,57.4297,661,52.4297,659,57.4297,661,62.4297,655,57.4297" style="stroke: #A80036; stroke-width: 1.0;" />
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="762" y="82.1279">Kafka</text>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="140" x="712" y="98.4248">platform.results.ccx</text>
        <ellipse cx="785" cy="53.1328" fill="#CCCCFF" filter="url(#fdrryxihurzcq)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;" />
        <line style="stroke: #A80036; stroke-width: 2.0;" x1="773" x2="797" y1="67.1328" y2="67.1328" />
        <polygon fill="#A80036" points="288,128.8594,298,132.8594,288,136.8594,292,132.8594" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="82" x2="294" y1="132.8594" y2="132.8594" />
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="89" y="127.7935">Notification about new tarball</text>
        <polygon fill="#A80036" points="458,157.9922,468,161.9922,458,165.9922,462,161.9922" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="300" x2="464" y1="161.9922" y2="161.9922" />
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="307" y="156.9263">Download tarball</text>
        <polygon fill="#A80036" points="195,187.125,185,191.125,195,195.125,191,191.125" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="189" x2="469" y1="191.125" y2="191.125" />
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="201" y="186.0591">Read tarball from bucket</text>
        <polygon fill="#A80036" points="458,216.2578,468,220.2578,458,224.2578,462,220.2578" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="184" x2="464" y1="220.2578" y2="220.2578" />
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="191" y="215.1919">Here's required tarball</text>
        <polygon fill="#A80036" points="311,245.3906,301,249.3906,311,253.3906,307,249.3906" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="305" x2="469" y1="249.3906" y2="249.3906" />
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="317" y="244.3247">Here's required tarball</text>
        <polygon fill="#A80036" points="558,289.6563,568,293.6563,558,297.6563,562,293.6563" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="300" x2="564" y1="293.6563" y2="293.6563" />
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="307" y="273.4575">Run rules</text>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="307" y="288.5903">against tarball</text>
        <polygon fill="#A80036" points="311,318.7891,301,322.7891,311,326.7891,307,322.7891" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="305" x2="569" y1="322.7891" y2="322.7891" />
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="317" y="317.7231">Return JSON report</text>
        <polygon fill="#A80036" points="647,363.0547,657,367.0547,647,371.0547,651,367.0547" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="300" x2="653" y1="367.0547" y2="367.0547" />
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="307" y="346.856">Insights results</text>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="307" y="361.9888">in JSON format</text>
        <polygon fill="#A80036" points="773,422.4531,783,426.4531,773,430.4531,777,426.4531" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="659" x2="779" y1="426.4531" y2="426.4531" />
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="666" y="391.1216">Publish insights</text>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="666" y="406.2544">results</text>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="666" y="421.3872">in JSON format</text>
        <!--MD5=[ecc4ff004e9664aba35194af2b41bcd7]
@startuml
hide footbox
title External data pipeline data flow

entity "Kafka\nplatform.upload.ccx" as kafka1 #99ff99
database S3
box "External data pipeline" #LightBlue
    control Consumer
    control Downloader
    control InsightsOcp
    control Producer
end box
entity "Kafka\nplatform.results.ccx" as kafka2 #ccccff

kafka1 - -> Consumer : Notification about new tarball
Consumer - -> Downloader : Download tarball
Downloader - -> S3 : Read tarball from bucket
S3 - -> Downloader : Here's required tarball
Downloader - -> Consumer : Here's required tarball
Consumer - -> InsightsOcp : Run rules\nagainst tarball
InsightsOcp - -> Consumer : Return JSON report
Consumer - -> Producer : Insights results\nin JSON format
Producer - -> kafka2 : Publish insights\nresults\nin JSON format

@enduml

PlantUML version 1.2019.12(Sun Nov 03 11:24:54 CET 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_191-b12
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
-->
    </g>
</svg>
